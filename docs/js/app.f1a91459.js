(function(t){function e(e){for(var i,o,s=e[0],c=e[1],u=e[2],p=0,f=[];p<s.length;p++)o=s[p],a[o]&&f.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/amap-flicker-marker/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2b2a":function(t,e,n){},"2fea":function(t,e,n){},"3d4b":function(t,e,n){"use strict";var i=n("2fea"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("dac5"),n("6e26"),n("9604"),n("df67");var i=n("6e6d"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o=(n("5c0b"),n("17cc")),s={},c=Object(o["a"])(s,a,r,!1,null,null,null),u=c.exports,l=n("3bc2"),p=(n("3c6b"),n("f763"),n("7bc1"),n("9b2d")),f=n.n(p);function h(t,e){return f.a.set(t,e)}function d(t){return f.a.get(t)}function v(t){var e=t.split("|"),n=[];return e.forEach(function(t){if(t){for(var e=[],i=t.match(/\d+(\.\d+)?/g),a=1;a<i.length;a+=2){var r=parseFloat(i[a-1]),o=parseFloat(i[a]);e.push([r,o])}e.length>=3&&n.push(e)}}),n}function m(t){var e,n,i,a;return t.forEach(function(t){t.forEach(function(t){(!e||e>y(t,0))&&(e=y(t,0)),(!n||n>y(t,1))&&(n=y(t,1)),(!i||i<y(t,0))&&(i=y(t,0)),(!a||a<y(t,1))&&(a=y(t,1))})}),{minX:e,minY:n,maxX:i,maxY:a}}function b(t){alert(t)}function y(t,e){return Array.isArray(t)?t[e]:0===e?t.getLng():t.getLat()}var _={setItem:h,getItem:d,getPointValue:v,getBounds:m,errMessage:b},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-router"},[n("router-view")],1)},O=[],j={},w=j,P=(n("980b"),Object(o["a"])(w,g,O,!1,null,"58ac492c",null)),x=P.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("MapView",{ref:"mapView"}),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.number,expression:"number",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.number},on:{input:function(e){e.target.composing||(t.number=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticStyle:{"margin-left":"10px"},on:{click:t.update}},[t._v("刷新")])])],1)},k=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-map",{ref:"map",attrs:{opts:t.opts},on:{created:function(e){return t.setRandList(100)}}},[n("FilckerPoints",{attrs:{data:t.data}})],1)},C=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"map",staticClass:"map"},[t.isCreated?t._t("default"):t._e()],2)},D=[],z=(n("2338"),n("fb37"),n("2492")),E="104a0cc0ce15a396dde189f4f7d438ff",L="1.4.14",S=1920,R=100,B=[];window.__AMAP_CALLBACK=function(){var t=B.shift();"function"===typeof t&&(t(),window.__AMAP_CALLBACK())};var I=!1;function V(t){if("function"===typeof t&&B.push(t),I)window.__AMAP_CALLBACK();else{I=!0;var e="https://webapi.amap.com/maps?v=".concat(L,"&key=").concat(E,"&callback=__AMAP_CALLBACK"),n=document.createElement("script");n.charset="utf-8",n.src=e,document.head.appendChild(n)}}function T(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function F(t){for(var e=1;e<arguments.length;e++)if(e%2){var n=null!=arguments[e]?arguments[e]:{};T(n,!0).forEach(function(e){Object(z["a"])(t,e,n[e])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[e])):T(n).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(arguments[e],n))});return t}var K,X,Y={props:{opts:{type:Object,default:function(){return{zoom:8,viewMode:"2D"}}}},data:function(){var t={};return{amap:t,isCreated:!1}},provide:function(){return{amap:this.amap}},mounted:function(){V(this.initMap)},beforeDestroy:function(){this.amap.$map&&(this.amap.$map.destroy(),delete this.amap.$map)},methods:{initMap:function(){var t=this;this.$emit("beforeCreate"),this.amap.$map=new AMap.Map(this.$refs.map,F({},this.opts)),setTimeout(function(){t.isCreated=!0,t.$emit("created",t.getMap())},1)},getMap:function(){return this.amap.$map||null},applyMethod:function(t){var e=this.getMap();if(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return e[t].apply(e,i)}console.warn("not ready")}}},q=Y,J=(n("3d4b"),Object(o["a"])(q,$,D,!1,null,"485d29c8",null)),N=J.exports,W=n("5f14"),U={render:function(){return null},inject:["amap"],created:function(){var t=this.getMap();"function"===typeof this.init&&this.init(t)},beforeDestroy:function(){"function"===typeof this.destroy&&this.destroy(),this.destroyObject()},methods:{getObject:function(){return this.$object||null},setObject:function(t){this.destroyObject(),this.$object=t},getMap:function(){return this.amap.$map||null},destroyObject:function(){this.$object&&("object"===Object(W["a"])(this.$object)?("function"===typeof this.$object.setMap&&this.$object.setMap(null),"function"===typeof this.$object.destroy&&this.$object.destroy(),this.$object=null):console.warn("$object is not object"))}}},G=U,H=Object(o["a"])(G,K,X,!1,null,null,null),Q=H.exports,Z=n("4a80"),tt=(n("1c74"),n("cc19")),et=n("b071"),nt=n("0df3"),it=n("b1df"),at=n("752b"),rt=n("0e37"),ot=n("b52d"),st=n("eaa5"),ct=n.n(st),ut=function(){function t(e){Object(tt["a"])(this,t),this._initialize(e||{})}return Object(et["a"])(t,[{key:"_initialize",value:function(t){this._position=t.position,this._speed=t.speed||1,this._color=t.color||"#f8a036",this._delay=t.delay||~~(1e3*Math.random()),this._radius=t.radius||30,this._circleRadius=t.circleRadius||2,this._time=(new Date).getTime()}},{key:"getStatus",value:function(){var t=(new Date).getTime(),e=t-this._time-this._delay;if(e<=0)return{position:this._position,color:this._color,circleRadius:this._circleRadius,radius:1,alpha:.8};var n=~~(1e3/this._speed),i=e%n,a=i/n,r=1-a,o=this._radius*a;return{position:this._position,color:this._color,circleRadius:this._circleRadius,radius:o,alpha:r}}},{key:"getPosition",value:function(){return this._position}},{key:"setExtData",value:function(t){this._extData=t}},{key:"getExtData",value:function(){return this._extData||null}}]),t}();function lt(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function pt(t){for(var e=1;e<arguments.length;e++)if(e%2){var n=null!=arguments[e]?arguments[e]:{};lt(n,!0).forEach(function(e){Object(z["a"])(t,e,n[e])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[e])):lt(n).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(arguments[e],n))});return t}var ft,ht,dt={1:{speed:.5,color:"#f8a036",radius:10},2:{speed:1,color:"#fb5447",radius:15},3:{speed:1.5,color:"#f0176e",radius:20}},vt=function(t){function e(t){var n;return Object(tt["a"])(this,e),n=Object(nt["a"])(this,Object(at["a"])(e).call(this,t)),n._loop=n._loop.bind(Object(it["a"])(n)),n._initialize(t||{}),n}return Object(ot["a"])(e,t),Object(et["a"])(e,[{key:"_initialize",value:function(t){this._level=t.level||dt;var e=this.getMap();e.on("moveend",this.clearPixel,this),e.on("resize",this.resizeCanvasSize,this),this._createCustomLayer(),this._loop()}},{key:"_createCustomLayer",value:function(){var t=this._canvas=document.createElement("canvas");this.resizeCanvasSize(),this._ctx=t.getContext("2d");var e=new AMap.CustomLayer(t,{zIndex:this.getzIndex()});e.render=null,this.setOverlays(e)}},{key:"_loop",value:function(){this._draw(),this._timer=requestAnimationFrame(this._loop)}},{key:"_draw",value:function(){this._clearCanvas(),this._drawCanvas()}},{key:"_clearCanvas",value:function(){this._ctx.clearRect(0,0,this._width,this._height)}},{key:"_drawCanvas",value:function(){if(this._points&&0!==this._points.length){var t=this._points,e=this._ctx;e.save();for(var n=0;n<t.length;n++){var i=t[n],a=this.getPixelByPoint(i),r=a.getX(),o=a.getY();if(r>0&&o>0&&r<this._width&&o<this._height){var s=i.getStatus();e.fillStyle=s.color,e.globalAlpha=s.alpha,e.beginPath(),e.arc(r,o,s.radius,0,2*Math.PI),e.fill(),e.globalAlpha=1,e.beginPath(),e.arc(r,o,s.circleRadius,0,2*Math.PI),e.fill()}}e.restore()}}},{key:"setData",value:function(t){var e=this;if(t){var n=t.map(function(t){var n=e._level[t.level||1],i=new ut(pt({},n,{position:t.position}));return i});this._points=n}else this._points=null}},{key:"addData",value:function(t){var e,n=this;Array.isArray(t)||(t=[t]);var i=t.map(function(t){var e=n._level[t.level||1],i=new ut(pt({},e,{position:t.position}));return i});this._points||(this._points=[]),(e=this._points).push.apply(e,Object(Z["a"])(i))}},{key:"destroy",value:function(){var t=this.getMap();this._timer&&(cancelAnimationFrame(this._timer),this._timer=null),t&&(t.off("moveend",this.clearPixel,this),t.off("resize",this.resizeCanvasSize,this)),Object(rt["a"])(Object(at["a"])(e.prototype),"destroy",this).call(this)}},{key:"resizeCanvasSize",value:function(){var t=this.getMap(),e=t.getSize(),n=this._canvas;n.width=this._width=e.width,n.height=this._height=e.height}},{key:"clearPixel",value:function(){this._points&&this._points.length>0&&this._points.forEach(function(t){t.setExtData(null)})}},{key:"getPixelByPoint",value:function(t){var e=t.getExtData();if(!e){var n=this.getMap(),i=t.getPosition();e=n.lngLatToContainer(i),t.setExtData(e)}return e}}]),e}(ct.a.Overlays),mt={mixins:[Q],props:{data:{type:Array,default:null}},methods:{init:function(t){var e={1:{speed:.5,color:"#f8a036",radius:10},2:{speed:1,color:"#fb5447",radius:15},3:{speed:1.5,color:"#f0176e",radius:20}},n=new vt({map:t,zIndex:150,level:e});this.setObject(n),this.initData()},initData:function(){var t=this.getObject();t.setData(this.data)},destroy:function(){}},watch:{data:function(){this.initData()}}},bt=mt,yt=Object(o["a"])(bt,ft,ht,!1,null,null,null),_t=yt.exports,gt={components:{AMap:N,FilckerPoints:_t},data:function(){return{opts:{zoom:10,center:[120.672913,27.980921]},data:[]}},methods:{setRandList:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=this.$refs.map.getMap(),n=e.getBounds(),i=n.getSouthWest(),a=n.getNorthEast(),r=i.getLng(),o=i.getLat(),s=a.getLng(),c=a.getLat(),u=[],l=0;l<t;l++){var p=Ot(r,s),f=Ot(o,c);u.push({position:[p,f],level:1+~~(3*Math.random())})}this.data=u}}};function Ot(t,e){return t+Math.random()*(e-t)}var jt=gt,wt=Object(o["a"])(jt,A,C,!1,null,null,null),Pt=wt.exports,xt={name:"home",components:{MapView:Pt},data:function(){return{number:100}},methods:{update:function(){this.$refs.mapView.setRandList(this.number)}}},Mt=xt,kt=(n("6ae4"),Object(o["a"])(Mt,M,k,!1,null,"43604a36",null)),At=kt.exports;i["a"].use(l["a"]);var Ct=new l["a"]({base:"/amap-flicker-marker/",routes:[{path:"/",name:"home",component:x,children:[{path:"",redirect:"mapView"},{path:"mapView",name:"mapView",component:At}]}]});Ct.beforeEach(function(t,e,n){if(console.log(t,"router"),!1!==t.meta.requiresAuth){var i=_.getItem("Authorization");if(!i)return void n("/login");n()}else n()});var $t=Ct,Dt=n("591a"),zt={},Et={},Lt={},St={},Rt={state:zt,getters:Et,mutations:Lt,actions:St};i["a"].use(Dt["a"]);var Bt=!1,It=new Dt["a"].Store({modules:{user:Rt},strict:Bt});n("9f35"),n("b329");window.onresize=function(){Vt()};var Vt=function(){var t=document.body.offsetWidth,e=t*R/S;document.documentElement.style.fontSize=e+"px"};Vt(),i["a"].config.productionTip=!1,new i["a"]({router:$t,store:It,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("2b2a"),a=n.n(i);a.a},"66c2":function(t,e,n){},"6ae4":function(t,e,n){"use strict";var i=n("66c2"),a=n.n(i);a.a},"980b":function(t,e,n){"use strict";var i=n("a3b4"),a=n.n(i);a.a},a3b4:function(t,e,n){},b329:function(t,e,n){}});
//# sourceMappingURL=app.f1a91459.js.map